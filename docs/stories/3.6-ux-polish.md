# Story 3.6 – UX Polish

**Status:** ✅ Complete (2025-12-17)

## Overview

Story 3.6 raises the last set of UI rough edges before launch. The options page
still shows placeholder typography, iconography is inconsistent between the
popup and options surfaces, and our empty/error states feel unfinished. This
story aligns the visual language, improves readability, and bakes accessibility
checks into the workflow so the extension feels cohesive.

## Objectives

- Standardize typography, spacing, and alignment across popup and options
  surfaces so they follow the same visual rhythm.
- Refresh iconography and status affordances to match the MarkQuote branding.
- Replace placeholder copy with final tone-checked strings and add contextual
  help where users stall.
- Ensure empty, loading, and error states communicate next actions clearly.

## Deliverables

- Shared design tokens (colors, typography scale, spacing utilities) consumed by
  popup and options bundles.
- Updated popup markup/styles that apply the new tokens, including badge/state
  chips and confirmation banners.
- Options-page refinements covering headings, table spacing, and helper text.
- Finalized strings documented in `docs/ui-architecture.md` (or similar) so
  localization/future tweaks have a source of truth.
- Visual regression checklist or snapshots added to `docs/dev/logs/`.

## Acceptance Criteria

- Popup and options use the same typography scale (headings, body, details) and
  spacing increments.
- All interactive elements pass 4.5:1 contrast, and focus states are visible in
  keyboard navigation.
- Empty states describe what will appear once data exists and link to the
  relevant action.
- String updates are reflected in the string inventory doc alongside rationale.
- Manual smoke pass confirms no layout regressions in light/dark modes.

## Risks & Mitigations

- **CSS regressions:** keep changes scoped via CSS modules or BEM-like naming;
  capture before/after screenshots for quick diffing.
- **String churn:** run updates through the product owner to avoid
  back-and-forth; maintain a glossary entry if terminology changes.
- **Time creep:** postpone non-essential animation or illustration work to a
  later polish story if it threatens the schedule.

## References

- Branch: `story/3.6-ux-polish`
- Prior work: `docs/stories/3.2-improve-popup-page.md`,
  `docs/stories/3.1-finish-options-page.md`

## Completion Notes

Implemented in commit `cdef6fc` on `release/1.0.4` branch:

- **Design tokens:** Added comprehensive CSS custom properties to `shared.css`
  for colors (light/dark), typography scale (xs through 3xl), spacing (1-8),
  radii (sm, md, lg, full), and font stacks (sans, mono).
- **Popup styles:** Updated `popup.html` to use design tokens for all hardcoded
  values (padding, gaps, border-radius, font sizes).
- **Options styles:** Updated `options.html` to use design tokens throughout
  sections, tables, forms, and responsive breakpoints.
- **Documentation:** Added Design System section to `ui-architecture.md` with
  token tables and accessibility notes.
- **Accessibility:** Verified all contrast ratios meet WCAG 2.1 AA (4.5:1
  minimum). Text on background achieves 16.67:1 (light) and 14.33:1 (dark).
- **Empty states:** Confirmed default rules are pre-populated, providing
  meaningful content on first load.
