# Story 4.3 - Structured Diagnostics & GitHub Handoff

**Status:** Not Started

## Overview

Enhance the diagnostics pipeline to capture structured error information that
users can easily share when reporting issues. Add a "Copy details" affordance
in the popup that generates a URL-safe diagnostic payload for GitHub issues.

## Objectives

- Capture structured error context (error type, stack, page info, settings)
- Add popup UI affordance to copy diagnostics
- Generate URL-safe export format for GitHub issue templates
- Preserve privacy by excluding sensitive page content

## Acceptance Criteria

- [ ] Diagnostics include: error type, timestamp, Chrome version, extension
      version, page URL (sanitized), relevant settings
- [ ] "Copy details" button appears in error states
- [ ] Copied format is markdown-friendly for GitHub issues
- [ ] No PII or page content in diagnostic output
- [ ] Works with existing error logging infrastructure

## Risks & Mitigations

- **Privacy concerns:** Explicitly exclude page content and selection text
- **Payload size:** Truncate long values, use URL-safe encoding
