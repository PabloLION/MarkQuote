# Story 3.2: Improve Popup Page

## Status

Completed

## Story

**As a** daily user who relies on the popup for confirmation,
**I want** it to mirror the options page styling, surface quick actions, and preview the copied markdown,
**so that** I can trust the result and reach common tasks without leaving the popup.

## Acceptance Criteria

1. The popup reuses the shared base styling (tokens, typography) established for the options page, maintaining consistent width and aesthetics.
2. A primary action bar appears at the top with three buttons (left to right): Options, Hotkey, Feedback; a fourth button “Copy inline mode” is aligned to the far right.
3. Each button performs the following:
   - `Options`: opens the options page via `chrome.runtime.openOptionsPage()` (or warns in dev if unavailable).
   - `Hotkey`: opens `chrome://extensions/shortcuts` in a new tab via `chrome.tabs.create`.
   - `Feedback`: opens the project’s GitHub repository in a new tab via `chrome.tabs.create`.
   - `Copy inline mode`: opens the GitHub issue requesting inline-mode support so users can react and signal interest (no local persistence required).
4. The popup keeps listening for `copied-text-preview` messages and renders the copied markdown preview beneath the action bar using the refreshed styling.

## Tasks / Subtasks

- [x] Apply the shared base theme to the popup HTML/CSS, keeping width aligned with the options page and polishing button styles. (AC: 1)
- [x] Implement the four-button action bar with the specified order and alignment; wire each button to its navigation handler. (AC: 2, 3)
- [x] Restructure the popup body so the preview panel sits below the action bar, retaining the real-time message handling. (AC: 4)
- [x] Document the new popup layout and button behaviour for contributors.
- [x] Update or add unit tests (and optional Playwright smoke) for the new button wiring and preview rendering.

## Dev Notes

- Shared styling lives in `public/styles/base.css`; extend if additional tokens are needed.
- When opening links, prefer `chrome.tabs.create`; fall back to `window.open` in dev builds where `chrome` may be mocked.
- Ensure the popup width remains consistent with the options page so UI doesn’t appear oversized.
- Preview should continue to be monospace and scrollable for long snippets; reuse options page spacing tokens where helpful.

### Testing

- Extend Vitest specs (or add new ones under `tests/unit/popup.test.ts`) to cover button click handlers and message-driven preview updates.
- Optionally add a Playwright smoke test ensuring the action bar renders and navigation hooks fire in the dev environment.

## Change Log

| Date       | Version | Description                                   | Author    |
| ---------- | ------- | --------------------------------------------- | --------- |
| 2025-09-23 | 0.2     | Clarified button order and inline-mode intent | Assistant |
| 2025-09-23 | 0.1     | Initial draft                                 | Assistant |

## Dev Agent Record

### Agent Model Used

_TBD_

### Debug Log References

_TBD_

### Completion Notes List

_TBD_

### File List

_TBD_

## QA Results

_TBD_
